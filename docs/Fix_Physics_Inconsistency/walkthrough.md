# Physics & Controls Overhaul Walkthrough

物理ベースのサーブ軌道計算と、双方向（着弾点/物理パラメータ）の制御システムを実装しました。

## 実装された機能

### 1. 物理ベースの軌道計算
従来の人工的なカーブ（Sin/Cosスプライン）を廃止し、**重力と初速に基づいた物理計算**（斜方投射）を導入しました。これにより、「2mから急に落ちる」ような不自然な挙動が解消されました。

### 2. 双方向のサーブ制御
コントロールパネルで以下の2つのアプローチが可能になりました：

- **着弾点指定（Outcome Based）**:
  - `Target X/Z` スライダーや 3Dマーカーのドラッグで着弾点を決めると、**「ネットを越える最速のサーブ」**になるように速度と角度が自動計算されます。
  - レシーバーの準備時間を最小化する最適化ロジックが組み込まれています。

- **物理パラメータ指定（Physics Based）**:
  - `Serve Speed` や `Launch Angle` を直接変更すると、物理法則に従って着弾点（Target X/Z）が更新されます。

### 3. インタラクティブな3D操作
- **OrbitControls**: マウスドラッグ（左ボタン）でカメラを回転、右ボタンで移動、ホイールでズームが可能です。
- **着弾点マーカー**: コート上の緑色のマーカーをドラッグすることで、直感的に着弾位置を変更できます。ドラッグ中もリアルタイムでサーブ軌道が再計算されます。

## 検証手順

1. **着弾点の変更**:
   - `Target Z` (深さ) を変更し、深くすると「速度が上がり、角度が低く」なり、浅くすると「速度が下がり、角度が高く（ロブ気味）」なることを確認してください。
   - 物理的に到達不能な場所（ネット直下など）には、安全策として山なりの軌道が計算されます。

2. **ドラッグ操作**:
   - 緑色のマーカーをクリック＆ドラッグし、着弾点が追従することを確認してください。

3. **速度の変更**:
   - `Serve Speed` を上げると、着弾点が奥に伸びる（またはネットに刺さる）ことを確認してください。

この変更により、シミュレーターはより実践的で物理的に正しい挙動を示すようになりました。
